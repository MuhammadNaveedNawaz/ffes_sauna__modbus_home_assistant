FFES Sauna Modbus - Home Assistant Integration
==============================================

PROJECT STRUCTURE:
==================

ffes-sauna-modbus/
â”‚
â”œâ”€â”€ ğŸ“„ README.md                          # Main documentation
â”œâ”€â”€ ğŸ“„ QUICK_START.md                     # Quick start guide
â”œâ”€â”€ ğŸ“„ INSTALLATION_GUIDE.md              # Detailed installation instructions
â”œâ”€â”€ ğŸ“„ CHANGELOG.md                       # Version history
â”œâ”€â”€ ğŸ“„ CONTRIBUTING.md                    # Contribution guidelines
â”œâ”€â”€ ğŸ“„ LICENSE                            # MIT License
â”œâ”€â”€ ğŸ“„ example_configuration.yaml         # Example automations & configs
â”œâ”€â”€ ğŸ“„ .gitignore                         # Git ignore rules
â”œâ”€â”€ ğŸ“„ hacs.json                          # HACS configuration
â”œâ”€â”€ ğŸ“„ info.md                            # HACS info
â”‚
â”œâ”€â”€ ğŸ“ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ validate.yml                  # GitHub Actions validation
â”‚
â””â”€â”€ ğŸ“ custom_components/
    â””â”€â”€ ğŸ“ ffes_sauna/                    # Main integration directory
        â”‚
        â”œâ”€â”€ ğŸ“„ __init__.py                # Integration setup & services
        â”œâ”€â”€ ğŸ“„ manifest.json              # Integration metadata
        â”œâ”€â”€ ğŸ“„ const.py                   # Constants & register definitions
        â”œâ”€â”€ ğŸ“„ coordinator.py             # Modbus communication coordinator
        â”œâ”€â”€ ğŸ“„ config_flow.py             # GUI configuration flow
        â”œâ”€â”€ ğŸ“„ services.yaml              # Service definitions
        â”œâ”€â”€ ğŸ“„ strings.json               # UI strings
        â”‚
        â”œâ”€â”€ ğŸ“„ climate.py                 # Climate entity (thermostat)
        â”œâ”€â”€ ğŸ“„ sensor.py                  # Sensor entities
        â”œâ”€â”€ ğŸ“„ switch.py                  # Switch entities
        â”œâ”€â”€ ğŸ“„ number.py                  # Number entities
        â”œâ”€â”€ ğŸ“„ select.py                  # Select entity (profile)
        â”œâ”€â”€ ğŸ“„ binary_sensor.py           # Binary sensor entities
        â”‚
        â””â”€â”€ ğŸ“ translations/
            â”œâ”€â”€ ğŸ“„ en.json                # English translations
            â””â”€â”€ ğŸ“„ pl.json                # Polish translations


KEY COMPONENTS:
===============

1. CORE FILES
   - __init__.py         : Main integration logic, service handlers
   - coordinator.py      : Modbus TCP communication, data polling
   - const.py           : Register addresses, constants, error codes

2. PLATFORM FILES
   - climate.py         : Temperature control (thermostat)
   - sensor.py          : 11 sensors (temp, humidity, status, etc.)
   - switch.py          : 4 switches (power, ventilation, etc.)
   - number.py          : 8 number controls (time, intensity, etc.)
   - select.py          : Profile selector
   - binary_sensor.py   : 5 binary sensors (error, heating, etc.)

3. CONFIGURATION
   - config_flow.py     : GUI configuration interface
   - services.yaml      : Service definitions for Home Assistant

4. DOCUMENTATION
   - README.md          : Complete feature list & examples
   - QUICK_START.md     : 10-step quick start guide
   - INSTALLATION_GUIDE.md : Detailed installation with troubleshooting
   - example_configuration.yaml : Ready-to-use automations


ENTITIES CREATED:
=================

After installation, the integration creates ~30 entities:

CLIMATE (1)
  â””â”€ climate.sauna_thermostat

SENSORS (11)
  â”œâ”€ sensor.sauna_current_temperature
  â”œâ”€ sensor.sauna_target_temperature
  â”œâ”€ sensor.sauna_humidity
  â”œâ”€ sensor.sauna_session_time
  â”œâ”€ sensor.sauna_ventilation_time
  â”œâ”€ sensor.sauna_status
  â”œâ”€ sensor.sauna_profile
  â”œâ”€ sensor.sauna_error_code
  â”œâ”€ sensor.sauna_error_message
  â”œâ”€ sensor.sauna_aromatherapy
  â””â”€ sensor.sauna_software_version

SWITCHES (4)
  â”œâ”€ switch.sauna_power
  â”œâ”€ switch.sauna_ventilation
  â”œâ”€ switch.sauna_frost_protection
  â””â”€ switch.sauna_infrared_mix

NUMBERS (8)
  â”œâ”€ number.sauna_session_time
  â”œâ”€ number.sauna_ventilation_time
  â”œâ”€ number.sauna_aromatherapy
  â”œâ”€ number.sauna_humidity_target
  â”œâ”€ number.sauna_cpir_g1_power
  â”œâ”€ number.sauna_cpir_g2_power
  â”œâ”€ number.sauna_cpir_g3_power
  â””â”€ number.sauna_cpir_g4_power

SELECT (1)
  â””â”€ select.sauna_profile

BINARY SENSORS (5)
  â”œâ”€ binary_sensor.sauna_error
  â”œâ”€ binary_sensor.sauna_heating
  â”œâ”€ binary_sensor.sauna_frost_protection_active
  â”œâ”€ binary_sensor.sauna_wifi_connected
  â””â”€ binary_sensor.sauna_server_connected


SERVICES:
=========

The integration provides 3 custom services:

1. ffes_sauna.start_session
   â””â”€ Start a sauna session with custom parameters

2. ffes_sauna.stop_session
   â””â”€ Stop the current sauna session

3. ffes_sauna.set_profile
   â””â”€ Change sauna profile (when off)


SUPPORTED PROFILES:
===================

1. Infrared Sauna      (30-60Â°C)
2. Dry Sauna          (30-110Â°C)  â† Most common
3. Wet Sauna          (30-65Â°C)
4. Ventilation        (cooling only)
5. Steam Bath         (20-50Â°C)
6. Infrared CPIR      (advanced IR control)
7. Infrared MIX       (combined heating)


MODBUS REGISTERS:
=================

Key registers (see const.py for complete list):

HOLDING REGISTERS (16-bit)
  REG[1]  (addr 0)  : Target Temperature
  REG[2]  (addr 1)  : Actual Temperature
  REG[4]  (addr 3)  : Sauna Profile (1-7)
  REG[5]  (addr 4)  : Session Time (minutes)
  REG[10] (addr 9)  : Humidity Set Value
  REG[11] (addr 10) : Error Code
  REG[15] (addr 14) : Humidity Actual
  REG[20] (addr 19) : Controller Status

COIL REGISTERS (1-bit)
  REG[1]  (addr 0)  : Controller State
  REG[2]  (addr 1)  : Session State
  REG[3]  (addr 2)  : Ventilation State


TECHNICAL DETAILS:
==================

Protocol      : Modbus TCP
Default Port  : 502
Slave ID      : 1 (configurable 1-247)
Update Rate   : 5-120 seconds (default: 10s)
HA Version    : 2024.1.0+
Python Lib    : pymodbus 3.6.8
Architecture  : Async/await coordinator pattern


FILES STATISTICS:
=================

Total Files       : 26
Python Files      : 11
Config Files      : 6
Documentation     : 6
Translation Files : 2
Workflow Files    : 1

Lines of Code     : ~2,500+ lines
Documentation     : ~1,500+ lines
Examples          : 20+ automations


FEATURES HIGHLIGHTS:
====================

âœ… Full temperature control
âœ… All 7 sauna profiles supported
âœ… Session timer (1-2000 minutes)
âœ… Humidity control (wet sauna)
âœ… Aromatherapy control
âœ… Ventilation management
âœ… CPIR infrared groups (4 groups)
âœ… Error monitoring & codes
âœ… Frost protection
âœ… GUI configuration
âœ… 3 custom services
âœ… Polish & English translations
âœ… HACS compatible
âœ… Comprehensive documentation
âœ… Example automations
âœ… GitHub Actions validation


INSTALLATION:
=============

1. Via HACS (Recommended)
   â””â”€ Add custom repo â†’ Install â†’ Restart

2. Manual
   â””â”€ Copy files â†’ Restart â†’ Configure

See INSTALLATION_GUIDE.md for details.


QUICK LINKS:
============

ğŸ“– Full Docs    : README.md
ğŸš€ Quick Start  : QUICK_START.md
ğŸ’¾ Install      : INSTALLATION_GUIDE.md
ğŸ“ Examples     : example_configuration.yaml
ğŸ¤ Contribute   : CONTRIBUTING.md
ğŸ“œ License      : LICENSE (MIT)


SUPPORT:
========

ğŸ› Bug Reports  : GitHub Issues
ğŸ’¬ Discussions  : GitHub Discussions
ğŸ“§ Questions    : GitHub Issues
â­ Star Project : GitHub Repository


VERSION:
========

Current Version : 1.0.0
Release Date    : 2025-10-29
Status          : Stable
Compatibility   : Home Assistant 2024.1.0+


AUTHOR:
=======

Created with â¤ï¸ for the Home Assistant community
Based on FFES Modbus TCP documentation
Not officially affiliated with FFES


===============================================
End of Project Structure Documentation
===============================================
